#!/bin/bash
# Auto-rebuild after git pull

echo "ğŸ”„ Post-merge hook: Rebuilding frontend..."

cd "$(git rev-parse --show-toplevel)/personalos"

# Check if package.json changed
if git diff HEAD@{1} --name-only | grep -q "package.json"; then
    echo "ğŸ“¦ package.json changed, running npm install..."
    npm install
fi

# Always rebuild after pull
echo "ğŸ—ï¸  Building frontend assets..."
npm run build

echo "âœ… Done! Refresh your browser."
